<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Task 4</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">Task 4</h1><br/><strong>Woohoo! We've gained a foothold into our victim machine! What's the name of the shell we have now?<br />• </strong>meterpreter<strong><br /><br /><br />What user was running that Icecast process? The commands used in this question and the next few are taken directly from the '</strong><a href="https://tryhackme.com/room/rpmetasploit">RP: Metasploit</a><strong>' room.<br /></strong>• ps<br />• Dark<strong><br /><br /><br />What build of Windows is the system?<br /></strong>• sysinfo<br />• 7601<strong><br /><br />                                                                                        <br />Now that we know some of the finer  details of the system we are working with, let's start escalating our  privileges. First, what is the architecture of the process we're  running?<br /></strong>• sysinfo<br />• x64<strong><br /><br /><br />Now that we know the architecture of the process, let's perform some further recon. While this doesn't work the best on x64 machines, let's now run the following command `run post/multi/recon/local_exploit_suggester`. *This can appear to hang as it tests exploits and might take several minutes to complete*<br /><br /><br />                                                            <br />Running the local exploit suggester  will return quite a few results for potential escalation exploits. What  is the full path (starting with exploit/) for the first returned  exploit?<br /></strong>• exploit/windows/local/bypassuac_eventvwr<strong><br /><br /><br />                                                                                        <br />Now that we have an exploit in mind for elevating our privileges, let's background our current session using the command `background` or `CTRL + z`. Take note of what session number we have, this will likely be 1 in this case. We can list all of our active sessions using the command `sessions` when outside of the meterpreter shell.   <br /><br /><br />                                                                                        <br />Go ahead and select our previously found local exploit for use using the command `use FULL_PATH_FOR_EXPLOIT`  <br /><br /><br />                                                            <br />Local exploits require a session to  be selected (something we can verify with the command `show options`),  set this now using the command `set session SESSION_NUMBER`<br /><br /><br />                                                                                        <br />Now that we've set our session  number, further options will be revealed in the options menu. We'll have  to set one more as our listener IP isn't correct. What is the name of  this option?<br /></strong>• LHOST<strong><br /><br /><br />                                                                                        <br />Set this option now. You might have to check your IP on the TryHackMe network using the command `ip addr`<br /><br /><br />                                                            <br /> After we've set this last option, we  can now run our privilege escalation exploit. Run this now using the  command `run`. Note, this might take a few attempts and you may need to  relaunch the box and exploit the service in the case that this fails.<br /> <br /> <br />                                                                                         <br />Following completion of the privilege  escalation a new session will be opened. Interact with it now using the  command `sessions SESSION_NUMBER`<br /><br /><br />We can now verify that we have expanded permissions using the command `getprivs`. What permission listed allows us to take ownership of files?<br /></strong>• SeTakeOwnershipPrivilege<strong><br />                            </strong><br />                        <br /><br /><br />                            <br />                        <br /><br />                            <br />                        <br /><br /><br />                          <br />                        <br />                         <br />                        <br /><br /><br /><br />                            <br />                        <br /></div></body></html>