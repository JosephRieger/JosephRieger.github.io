<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Task 2 Enumerating Samba for shares</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">Task 2 Enumerating Samba for shares</h1><br/>Samba is the standard Windows  interoperability suite of programs for Linux and Unix. It allows end  users to access and use files, printers and other commonly shared  resources on a companies intranet or internet. Its often referred to as a  network file system.<br />Samba is based on  the common client/server protocol of Server Message Block (SMB). SMB is  developed only for Windows, without Samba, other computer platforms  would be isolated from Windows machines, even if they were part of the  same network.<br /><br /><br />Using nmap we can enumerate a machine for SMB shares.<br />Nmap has the ability to run to automate a wide variety of networking tasks. There is a script to enumerate shares!<br /><span style="color:#ce0000;">nmap -p 445 --script=smb-enum-shares.nse,smb-enum-users.nse 10.10.69.234</span><br />SMB has two ports, 445 and 139.<br /><br /><br /><a href="https://i.imgur.com/bkgVNy3.png"><img src="images/58-1.png" alt="images/58-1.png" /></a><br /><br /><strong>Using the nmap command above, how many shares have been found?</strong><br /><br />    \\10.10.69.234\IPC$: <br />    \\10.10.69.234\anonymous: <br />    \\10.10.69.234\print$: <br /><br />    <strong>Answer:</strong> 3<br /><br /><br />On most distributions of Linux smbclient is already installed. Lets inspect one of the shares.<br /><span style="color:#ce0000;">smbclient //&lt;ip&gt;/anonymous</span><br />Using your machine, connect to the machines network share.<br />• no password was required, just a simple enter<br /><br /><br />Once you're connected, list the files on the share. What is the file can you see?<br />• ls<br />• log.txt<br /><br /><br />You can recursively download the SMB share too. Submit the username and password as nothing.<br /><span style="color:#ce0000;">smbget -R smb://&lt;ip&gt;/anonymous</span><br />Open the file on the share. There is a few interesting things found.<br />• Information generated for Kenobi when generating an SSH key for the user<br />• Information about the ProFTPD server.<br /><br />What port is FTP running on?<br /><br />    <strong>Answer: </strong>21<br /><br /><br /><br /> Your earlier nmap port scan will have  shown port 111 running the service rpcbind. This is just a server that  converts remote procedure call (RPC) program number into universal  addresses. When an RPC service is started, it tells rpcbind the address  at which it is listening and the RPC program number its prepared to  serve. <br />In our case, port 111 is access to a network file system. Lets use nmap to enumerate this.<br /><span style="color:#ce0000;">nmap -p 111 --script=nfs-ls,nfs-statfs,nfs-showmount 10.10.69.234</span><br /><br /><strong>What mount can we see?</strong><br />    <br />    <strong>Answer:</strong> /var<br />                            <br /><br />                            <br /><br /><br />                            <br />                        <br /></div></body></html>