<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Task 3 Gain initial access with ProFtpd</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">Task 3 Gain initial access with ProFtpd</h1><br/>ProFtpd  is a free and open-source FTP server, compatible with Unix and Windows  systems. Its also been vulnerable in the past software versions.<br /><br />        <br />                                                                                                                    <br />Lets get the version of ProFtpd. Use netcat to connect to the machine on the FTP port.<br /><br /><strong>What is the version?</strong><br /><br />   ◇ nc 10.10.69.234 21<br />   <strong>Answer:</strong> 1.3.5<br />               <br />                        <br />                                                                                                                 <br /> We can use searchsploit to find exploits for a particular software version.<br />Searchsploit is basically just a command line search tool for exploit-db.com.<br /><br /><strong>How many exploits are there for the ProFTPd running?</strong><br /><br />    <strong>Answer:</strong> 3<br />                            <br />                        <br />                                                                                                                                                                                                                                                             <br /> You should have found an exploit from ProFtpd's <a href="http://www.proftpd.org/docs/contrib/mod_copy.html">mod_copy module</a>. <br /> <br />The mod_copy module implements <strong>SITE CPFR</strong> and <strong>SITE CPTO</strong>  commands, which can be used to copy files/directories from one place to  another on the server. Any unauthenticated client can leverage these  commands to copy files from any part of the filesystem to a chosen destination.<br /><br />We  know that the FTP service is running as the Kenobi user (from the file  on the share) and an ssh key is generated for that user. <br />                            <br />                                                                                    <br />We're now going to copy Kenobi's private key using SITE CPFR and SITE CPTO commands.<br /><br />We  knew that the /var directory was a mount we could see (task 2, question  4). So we've now moved Kenobi's private key to the /var/tmp directory.<br />                            <br />                        <br />                                                                                                                                                        <br />                                                    <br /><br />                                                                                        <br />Lets mount the /var/tmp directory to our machine<br /><span style="color:#ce0000;">mkdir /mnt/kenobiNFS<br />mount machine_ip:/var /mnt/kenobiNFS<br />ls -la /mnt/kenobiNFS</span><br /><br />We  now have a network mount on our deployed machine! We can go to /var/tmp  and get the private key then login to Kenobi's account.<br />• mounting of an NFS share requires the installation of nfs-common<br />• cp /mnt/kenobiNFS/tmp/id_rsa .<br />• sudo chmod 600 id_rsa <br />• ssh -i id_rsa kenobi@10.10.69.234<br /><br /><br /><strong>What is Kenobi's user flag (/home/kenobi/user.txt)?</strong><br /><br />    <strong>Answer:</strong> d0b0f3f53b6caa532a83915e19224899<br /><br />                            <br />                        <br /></div></body></html>